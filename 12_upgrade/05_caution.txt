=== Caution cases

==== Compatibility between Rudder agent 4.0 and older server versions

===== 3.1.x (>= 3.1.11), 3.2 servers

Rudder agents 4.0.x are fully compatible with Rudder server 3.1.x starting from 3.1.11 and 3.2 servers.

===== <3.0.x and 3.1.x (< 3.1.11) servers

Rudder agents 4.0.x are not compatible with Rudder servers older than than 3.1.11.

==== Compatibility between Rudder server 4.0 and older agent versions

===== 3.1.x and 3.2.x agents

As they use a compatible CFEngine version, Rudder agent 3.1.x and 3.2.x are fully compatible with Rudder server 4.0.x. It is therefore not strictly necessary to update your agents to 4.0.x.

===== 3.0.x or older

These agents are not compatible with Rudder 4.0, and you have to upgrade them. 
Be careful to follow the upgrade path explained <<_upgrade_from_rudder_3_0_or_older, above>>.

==== Protocol for reporting

Rudder 3.1 uses syslog messages over UDP by default for reporting, but if you upgraded
your server from a previous version, you will keep the previous setting which uses
syslog messages over TCP.

You should consider switching to UDP (in *Administration* -> *Settings* -> *Protocol*),
as it will prevent breaking your server in
case of networking or load issues, or if you want to manage a lot of nodes.
The only drawback is that you can lose reports in these situations. It does not
affects the reliability of policy enforcement, but may only temporarily affects
reporting on the server.
Read <<_rsyslog, perfomance notes>> about rsyslog for detailed information.

==== Known issues

* After upgrade, if the web interface has display problems, empty your navigator cache and/or logout/login.

