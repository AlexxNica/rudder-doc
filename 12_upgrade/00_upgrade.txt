== Upgrade

This short chapter covers the upgrade of the Rudder Server Root and Rudder Agent
from older versions to the latest version, 4.0.

The upgrade is quite similar to the installation.

A big effort has been made to ensure that all upgrade steps are performed
automatically by packaging scripts. Therefore, you shouldn't have to do any
upgrade procedures manually, but you will note that several data migrations
occur during the upgrade process.

==== Upgrade from Rudder 3.1 or 3.2

Migration from 3.1 or 3.2 are supported, so you can upgrade directly to 4.0.

[WARNING]

====

In Rudder 4.0, we changed the default communication protocol between agent and server,
but still stay compatible with the old protocol. Hence, you can perfectly keep using
pre-4.0 agents with a 4.0 server.

However, some networking issues may appear when using 4.0 agents with older servers with the
reverse DNS lookup option disabled in the settings (*Security* ->
*Use reverse DNS lookups on nodes to reinforce authentication to policy server*).

Therefore, you need to upgrade your server to 4.0 *before* upgrading the nodes so that the
configuration distributed to the nodes include the use of the new protocol.

====

==== Upgrade from Rudder 3.0 or older

Direct upgrades from 3.0.x and older are no longer supported on 4.0.
If you are still running one of those, either on servers or nodes,
please first upgrade to one of the supported versions above, and then upgrade to 4.0.

